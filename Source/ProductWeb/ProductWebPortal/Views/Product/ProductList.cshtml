@{
    ViewBag.Title = "Product List";
    Layout = "~/Views/Shared/_listLayout.cshtml";
}
    
<style>
* {
    margin: 0;
    padding: 0;
}
.cell-title {
    font-weight: bold;
}

.cell-effort-driven {
    text-align: center;
}
.cell-selection {
    border-right-color: silver;
    border-right-style: solid;
    background: #f5f5f5;
    color: gray;
    text-align: right;
    font-size: 10px;
}

.slick-row.selected .cell-selection {
    background-color: transparent; /* show default selected row background */
}
</style>
<link rel="stylesheet" href="/PlatJs/Scripts/cutetoolbar/css/cutetoolbar.css" />
<link rel="stylesheet" href="/PlatJS/Content/jquery.fancybox.css" />
<link rel="stylesheet" href="/PlatJS/Content/jquery.fancybox-buttons.css" />

<script type="text/javascript" src="~/Javascript/productList.js"></script> 
<script type="text/javascript" src="/PlatJS/Scripts/cutetoolbar/cutetoolbar.js"></script>

<script type="text/javascript" src="/PlatJS/Scripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript" src="/PlatJS/Scripts/jquery.fancybox-buttons.js"></script>

<script type="text/javascript">
    $(function () {
        $("#productCuteToolBar").cuteToolBarCtrl({
            defaultCRUDButtons: true,
            defaultPrefixName: "prefixProudctToolBar",
            //onSelectButton: function (e) {
            //    ;//alert("button selected");
            //}
        });


        $("#productCuteToolBar").cuteToolBarBind("search", pwpProductList.onSearchClick);
        $("#productCuteToolBar").cuteToolBarBind("add", pwpProductList.onAddClick);
        $("#productCuteToolBar").cuteToolBarBind("edit", pwpProductList.onEditClick);
        $("#productCuteToolBar").cuteToolBarBind("delete", pwpProductList.onDeleteClick);
        $("#productCuteToolBar").cuteToolBarBind("save", pwpProductList.onSaveClick);

        //产品表单对话框
        $("#productFormFancybox").fancybox({
            maxWidth: 600,
            maxHeight: 400,
            fitToView: false,
            width: '70%',
            height: '70%',
            autoSize: false,
            closeClick: false,
            openEffect: 'none',
            closeEffect: 'none'
        });

        //产品查询表单
        $("#productQueryFancybox").fancybox({
            maxWidth: 600,
            maxHeight: 400,
            fitToView: false,
            width: '70%',
            height: '70%',
            autoSize: false,
            closeClick: false,
            openEffect: 'none',
            closeEffect: 'none',
            // we won't use beforeClose but beforeShow
            beforeShow: function () {
                // get the value of pageload INSIDE the iframe
                //pageload = $('.fancybox-iframe').contents().find('#pageload').val();
                //alert("befor show query");
            },
            beforeClose: function () {
                var productTypeId = $("#hdnQueryProductTypeId").val();
                if (productTypeId) {
                    pwpProductList.init();
                }
            }
        });
    })

    function onProductListPrintClick() {
        var url = "/ProductWebPortal/Product/Query";

        $("#productQueryFancybox").attr("href", url);
        $("#productQueryFancybox").click();
    }
</script>

<div id="productListContainer" style="position:relative;">
     <div style="width:600px;">
        <div id="productCuteToolBar" class="cutetoolbar">
            <ul>
                <li>
                   <a href="#"><img src="/PlatJS/Scripts/cutetoolbar/images/print.png" alt="" onclick="onProductListPrintClick();" />打印</a>
                </li>
                <li>
                    <a href="#"><img src="/PlatJS/Scripts/cutetoolbar/images/Excel.png" alt="" />Excel</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="grid-header">
      <label>产品列表</label>
      <span style="float:right" class="ui-icon ui-icon-search" title="Toggle search panel" onclick="toggleFilterRow()"></span>
    </div>
    <div id="myGridProduct"  style="width:360px;height:700px;border:gray solid 1px;overflow-y:auto;"></div>
    <div id="myPagerProduct"></div>
    <input id="hdnShowOrderListByProductId" type="hidden" value="" />
</div>

<div id="OrderListDialog" style="display:none;width:850px;height:750px;"></div>

<div id="inlineFilterPanel" style="display:none;background:#dddddd;padding:3px;color:black;">
  输入查询产品的名称 <input type="text" id="txtQueryProductName" style="width:120px;">
  和 产品类型ID &nbsp;
  <input type="text" id="txtQueryProductType" style="width:50px" >
</div>
<a id="productQueryFancybox" data-fancybox-type="iframe" class="productQueryFancybox"></a>
<a id="productFormFancybox" data-fancybox-type="iframe" class="productFormFancybox"></a>
<input id="hdnQueryProductName" type="hidden" />
<input id="hdnQueryProductTypeId" type="hidden" />


